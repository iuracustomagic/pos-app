const _0x44190c=_0x51d0,fs=(!function(){for(var e=_0x51d0,r=_0x4de3();;)try{if(118260==+parseInt(e(201))+-parseInt(e(216))/2+-parseInt(e(212))/3+-parseInt(e(174))/4+-parseInt(e(197))/5*(parseInt(e(225))/6)+-parseInt(e(163))/7*(parseInt(e(199))/8)+parseInt(e(145))/9)break;r.push(r.shift())}catch(e){r.push(r.shift())}}(),require("fs")),jwt=require(_0x44190c(184)+"en"),logger=require(_0x44190c(157)),JWT_SECRET=require(_0x44190c(156)+"n")["JWT_SECRET"],user=require(_0x44190c(138)+_0x44190c(142))["user"],timeFormatter=require(_0x44190c(189))[_0x44190c(146)],toDaysDay=(new Date)[_0x44190c(224)]()+"/"+((new Date)[_0x44190c(155)]()+1)+"/"+(new Date)[_0x44190c(194)+"r"](),time=JSON[_0x44190c(170)](fs[_0x44190c(191)+"nc"](process[_0x44190c(227)][_0x44190c(195)]+(_0x44190c(182)+_0x44190c(214)))[_0x44190c(128)]());async function logging(e,r){var t=_0x44190c,n={ukgvt:function(e,r){return e===r},NgNfo:t(147)+t(202)+t(218),QEpJQ:t(159),vQgGf:t(200),nVJqE:function(e,r){return e(r)},PEjdX:t(135)};try{var a=await user[t(151)]({code:e[t(136)][t(153)]});if(n[t(165)](a,null))throw new Error(n[t(223)]);var s=jwt[t(143)]({data:a},JWT_SECRET),i=(r[t(205)](n[t(168)],s)[t(208)](s),await a[t(137)]({loggedIn:new Date}),await a[t(222)](),time[toDaysDay]||(time[toDaysDay]={}),time[toDaysDay][a[t(153)]+", "+(a[t(150)]||n[t(130)])]);time[toDaysDay][a[t(153)]+", "+(a[t(150)]||n[t(130)])]=(i||[])[t(162)]({in:n[t(204)](timeFormatter,new Date)}),fs[t(160)](process[t(227)][t(195)]+(t(182)+t(214)),JSON[t(171)](time,null,2),n[t(186)],e=>{if(e)throw e})}catch(e){logger[t(127)](e[t(126)]),r[t(133)](500)[t(208)](e[t(126)])}}function _0x4de3(){const e=["admin","You don't ","Error duri","/server/ti","have permi","jsonwebtok","gHPJD","PEjdX","nopaQ","find","../helpers","User hasn'","readFileSy","wLYTc","Error whil","getFullYea","extra","eted!","850OyuLbd","qnGas","312zJjBdj","User","174036uZlxzM","deosn't ex","e register","nVJqE","cookie","qqDDZ","create","send","data","ssion to c","s updated","179682eaQjpa","irTZS","me.json","WJzGx","182988joMXGY","_id","ists","No users f","essfully!","tered succ","save","NgNfo","getDate","4206WSWgso","ng exit","env","unt","PDkQs","ippIx","message","info","toString","deletedCou","vQgGf","OahbL","query","status","ing","utf-8","body","updateOne","../schema/","exports","findById","rpQDG","index","sign","modifiedCo","2286243uKJgFi","time","This code ","reate user","User has b","username","findOne"," the user","code","PPqxi","getMonth","../env.jso","../logger","DGcgJ","jwt","writeFile","No user wa","concat","6139IwhhVv","LsfVD","ukgvt","een reggis","e updating","QEpJQ","lean","parse","stringify","deleteOne","matchedCou","20168LYyyMX","date","qCdGD","t been del","ound to up"];return(_0x4de3=function(){return e})()}async function logout(e,r){var t=_0x44190c,n={rpQDG:t(181)+t(226)};try{var a=await user[t(140)](e[t(132)].id);await a[t(137)]({loggedOut:new Date}),await a[t(222)](),r[t(208)](!0)}catch(e){logger[t(127)](e[t(126)]),r[t(133)](500)[t(208)](n[t(141)])}}async function registering(e,r){var t=_0x44190c,n={ippIx:t(180)+t(183)+t(210)+t(148)+"s",qqDDZ:t(200),LsfVD:t(149)+t(166)+t(221)+t(220),nopaQ:t(193)+t(203)+t(134)};try{if(!e[t(159)][t(209)][t(179)])throw new Error(n[t(125)]);await user[t(207)]({...e[t(136)],username:e[t(136)]?.[t(150)]||n[t(206)]}),r[t(208)](n[t(164)])}catch(e){logger[t(127)](e[t(126)]),r[t(133)](500)[t(208)](e?.[t(126)]?e[t(126)]:n[t(187)])}}async function getUserById(e,r){var t=_0x44190c,n={qCdGD:t(180)+t(183)+t(210)+t(148)+"s"};try{if(!e[t(159)][t(209)][t(179)])throw new Error(n[t(176)]);var a=await user[t(140)](e[t(132)][t(217)]);r[t(208)](JSON[t(171)](a))}catch(e){logger[t(127)](e[t(126)]),r[t(133)](500)[t(208)](e[t(126)])}}function _0x51d0(e,r){const t=_0x4de3();return(_0x51d0=function(e,r){return e-=124,t[e]})(e,r)}async function getAllUsers(e,r){var t=_0x44190c,n={OahbL:t(180)+t(183)+t(210)+t(148)+"s"};try{if(!e[t(159)][t(209)][t(179)])throw new Error(n[t(131)]);var a=await user[t(188)]({})[t(169)]();r[t(208)](JSON[t(171)](a))}catch(e){logger[t(127)](e[t(126)]),r[t(133)](500)[t(208)](e[t(126)])}}async function deleteUserById(e,r){var t=_0x44190c,n={PDkQs:t(180)+t(183)+t(210)+t(148)+"s",PPqxi:function(e,r){return e===r},WJzGx:t(190)+t(177)+t(196)};try{if(!e[t(159)][t(209)][t(179)])throw new Error(n[t(124)]);var a=await user[t(172)]({_id:e[t(132)].id});if(n[t(154)](a[t(129)+"nt"],0))throw new Error(n[t(215)]);r[t(208)](!0)}catch(e){logger[t(127)](e[t(126)]),r[t(208)](500)[t(208)](e[t(126)])}}async function updateUser(e,r){var t=_0x44190c,n={gHPJD:t(180)+t(183)+t(210)+t(148)+"s",irTZS:function(e,r){return e===r},wLYTc:t(161)+t(211),qnGas:t(219)+t(178)+t(175),DGcgJ:t(193)+t(167)+t(152)};try{if(!e[t(159)][t(209)][t(179)])throw new Error(n[t(185)]);var a=await user[t(137)]({_id:e[t(132)].id},e[t(136)]);if(n[t(213)](a[t(144)+t(228)],0))throw new Error(n[t(192)]);if(n[t(213)](a[t(173)+"nt"],0))throw new Error(n[t(198)]);var s=await user[t(140)](e[t(136)][t(217)]);r[t(208)](jwt[t(143)]({data:s},JWT_SECRET))}catch(e){logger[t(127)](e[t(126)]),r[t(133)](500)[t(208)](e?.[t(126)]?e[t(126)]:n[t(158)])}}module[_0x44190c(139)]={logging:logging,logout:logout,registering:registering,getUserById:getUserById,getAllUsers:getAllUsers,deleteUserById:deleteUserById,updateUser:updateUser};